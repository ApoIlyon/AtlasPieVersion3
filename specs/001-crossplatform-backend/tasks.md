# Tasks: Cross-Platform Backend Architecture

**Input**: Design documents from `/specs/001-crossplatform-backend/`
**Prerequisites**: plan.md (required), spec.md (required for user stories), research.md, data-model.md, contracts/, quickstart.md

## Phase 1: Setup (Shared Infrastructure)

**Purpose**: –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ cross-platform backend.

- [ ] T001 –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ Tauri-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `autohotpie-tauri` —á–µ—Ä–µ–∑ `cargo tauri build` –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `autohotpie-tauri/`.
- [ ] T002 [P] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `tauri-plugin-global-shortcut` –∏ `tauri-plugin-cli` –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –≤ `autohotpie-tauri/src-tauri/Cargo.toml` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥—É–ª—è—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
- [ ] T003 [P] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å dev-–æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (npm/yarn/pnpm install) –≤ `autohotpie-tauri/` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞.
- [ ] T004 –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤–µ—Ä—Å–∏–∏ Rust, Node –∏ Tauri –≤ `README` –∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞—Ç—å —Å–µ–∫—Ü–∏—é), –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

---

## Phase 2: Foundational (Blocking Prerequisites)

**Purpose**: –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É backend –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É overlay, –±–µ–∑ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π.

- [ ] T005 –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å `backend` –≤ `autohotpie-tauri/src-tauri/src/backend/mod.rs` —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç—Ä–µ–π—Ç–∞ `Backend` (–º–µ—Ç–æ–¥—ã —Ö–æ—Ç–∫–µ–µ–≤, –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä—Å–æ—Ä–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è pie-–º–µ–Ω—é) –∏ enum `BackendKind`.
- [ ] T006 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `BackendDispatcher` –≤ `autohotpie-tauri/src-tauri/src/backend/mod.rs`, –≤—ã–±–∏—Ä–∞—é—â–∏–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ `std::env::consts::OS` –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏—è (Wayland/X11), —Å fallback –Ω–∞ stub backend.
- [ ] T007 –°–æ–∑–¥–∞—Ç—å stub —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è X11 –∏ Wayland (`x11.rs`, `gnome_wayland.rs`, `kde_wayland.rs`) –≤ `autohotpie-tauri/src-tauri/src/backend/` —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –∑–∞–≥–ª—É—à–∫–∞–º–∏, –ª–æ–≥–∏—Ä—É—é—â–∏–º–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.
- [ ] T008 –î–æ–±–∞–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–µ –æ–∫–Ω–æ `pie-overlay` –≤ `autohotpie-tauri/src-tauri/tauri.conf.json` (transparent, decorations=false, always_on_top=true, visible=false) —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –æ–∫–Ω–∞.
- [ ] T009 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å `pie_overlay` –≤ `autohotpie-tauri/src-tauri/src/services/pie_overlay.rs` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ `show_at(x, y)` –∏ `hide()`, —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ —Å –æ–∫–Ω–æ–º `pie-overlay` —á–µ—Ä–µ–∑ `tauri::Window`.
- [ ] T010 –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π (–ø–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ overlay, –≤—ã–±–æ—Ä backend) –≤ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª—è—Ö `backend` –∏ `pie_overlay`.

**Checkpoint**: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ backend –∏ –æ–∫–Ω–æ overlay –≥–æ—Ç–æ–≤—ã, –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ user stories.

---

## Phase 3: User Story 1 - Wayland –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –º–µ–Ω—é (Priority: P1) üéØ MVP

**Goal**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ Wayland (GNOME/KDE/–¥—Ä.) –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∏ —Å–∫—Ä—ã–≤–∞—Ç—å pie-–º–µ–Ω—é —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ö–æ—Ç–∫–µ–π, –∑–∞–ø—É—Å–∫–∞—é—â–∏–π `autohotpie-tauri --toggle`.

**Independent Test**: –ü—Ä–∏ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –¥–µ–º–æ–Ω–µ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º —Ö–æ—Ç–∫–µ–µ `--toggle` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç overlay –≤ –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä—Å–æ—Ä–∞ (–∏–ª–∏ —Ü–µ–Ω—Ç—Ä–µ —ç–∫—Ä–∞–Ω–∞, –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞) –∏ —Å–∫—Ä—ã–≤–∞–µ—Ç –µ–≥–æ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—ã–∑–æ–≤–µ; –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Windows backend.

### Implementation for User Story 1

- [ ] T011 [US1] –î–æ–±–∞–≤–∏—Ç—å Tauri-–∫–æ–º–∞–Ω–¥—É `toggle_pie_menu` –≤ `autohotpie-tauri/src-tauri/src/main.rs`, –∏—Å–ø–æ–ª—å–∑—É—é—â—É—é `BackendDispatcher` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä—Å–æ—Ä–∞ (–∏–ª–∏ —Ü–µ–Ω—Ç—Ä–∞ —ç–∫—Ä–∞–Ω–∞) –∏ –≤—ã–∑–æ–≤–∞ `pie_overlay::show_at` / `hide`.
- [ ] T012 [US1] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CLI-–ø—É—Ç—å `--toggle` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Tauri (CLI —Ä–∞–∑–¥–µ–ª `tauri.conf.json` –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ `autohotpie-tauri/src-tauri/src/cli/toggle.rs`), –∫–æ—Ç–æ—Ä—ã–π —á–µ—Ä–µ–∑ `tauri::async_runtime::spawn` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç IPC-–≤—ã–∑–æ–≤ –∫ —É–∂–µ —Ä–∞–±–æ—Ç–∞—é—â–µ–º—É —ç–∫–∑–µ–º–ø–ª—è—Ä—É –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- [ ] T013 [US1] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å IPC –∫–æ–Ω—Ç—Ä–∞–∫—Ç `toggle_pie_menu` –∏ —Å–æ–±—ã—Ç–∏–µ `pie-menu:state-changed` –≤ `autohotpie-tauri/src-tauri/src/main.rs` —Å–æ–≥–ª–∞—Å–Ω–æ `contracts/toggle_command.md`.
- [ ] T014 [P] [US1] –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ IPC-—Å–ª–æ–π –≤ `autohotpie-tauri/src/services/ipc.ts`, –¥–æ–±–∞–≤–∏–≤ —Ñ—É–Ω–∫—Ü–∏—é `togglePieMenu()` (–≤—ã–∑–æ–≤ –∫–æ–º–∞–Ω–¥—ã `toggle_pie_menu` –∏ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `pie-menu:state-changed`).
- [ ] T015 [P] [US1] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `App.tsx` –≤ `autohotpie-tauri/src/App.tsx`, —á—Ç–æ–±—ã –≤–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–ª—É—à–∞—Ç–µ–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Ç–∫–µ—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IPC-–≤—ã–∑–æ–≤ `togglePieMenu()` –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ overlay –∏–∑ —Å–æ–±—ã—Ç–∏—è.
- [ ] T016 [US1] –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ overlay –Ω–∞ Wayland stub backend: –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∫—É—Ä—Å–æ—Ä–∞ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –æ–∫–Ω–æ –≤ —Ü–µ–Ω—Ç—Ä–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞, –Ω–µ –ø–∞–¥–∞—è —Å –æ—à–∏–±–∫–æ–π.
- [ ] T017 [US1] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –¥–ª—è CLI `--toggle` (—Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –¥–µ–º–æ–Ω–∞, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ backend) –≤ `autohotpie-tauri/src-tauri/src/cli/toggle.rs`.
- [ ] T018 [US1] –í–Ω–µ—Å—Ç–∏ –≤ `quickstart.md` (—É–∂–µ —Å–æ–∑–¥–∞–Ω) —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ç–æ–º—É, —á—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ overlay –∏ –æ—à–∏–±–∫–∞ `BackendUnavailable` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–µ.

**Checkpoint**: US1 –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ Wayland —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º —Ö–æ—Ç–∫–µ–µ–º.

---

## Phase 4: User Story 2 - Windows –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–π –æ–ø—ã—Ç (Priority: P2)

**Goal**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Windows –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ö–æ—Ç–∫–µ–π, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º—ã–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –±–µ–∑ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –ø–æ—Å–ª–µ –≤–≤–µ–¥–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã backend.

**Independent Test**: –ù–∞ Windows –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ö–æ—Ç–∫–µ–π –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ overlay —Ç–∞–∫ –∂–µ, –∫–∞–∫ –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏, –∞ –Ω–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (dispatcher/overlay) –Ω–µ –ª–æ–º–∞—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

### Implementation for User Story 2

- [ ] T019 [US2] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `WindowsBackend` –≤ `autohotpie-tauri/src-tauri/src/backend/windows.rs`, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π `tauri-plugin-global-shortcut` –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/—Å–Ω—è—Ç–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Ç–∫–µ—è –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è pie-–º–µ–Ω—é.
- [ ] T020 [US2] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Ö–æ—Ç–∫–µ—è –≤ –ø–æ—Ç–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ `autohotpie-tauri/src-tauri/src/main.rs`, –∏—Å–ø–æ–ª—å–∑—É—è `WindowsBackend` —á–µ—Ä–µ–∑ `BackendDispatcher`.
- [ ] T021 [US2] –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Ç–∫–µ—è –Ω–∞ Windows —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –≤—ã–∑—ã–≤–∞–ª–∏ –æ–±—â—É—é –∫–æ–º–∞–Ω–¥—É `toggle_pie_menu`, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—É—Ç—å, —Å–æ—Ö—Ä–∞–Ω–∏–≤ —Å—Ç–∞—Ä–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- [ ] T022 [P] [US2] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏/–æ—Ç–≤—è–∑–∫–∏ —Ö–æ—Ç–∫–µ–µ–≤ (id, –∫–æ–º–±–∏–Ω–∞—Ü–∏—è) –≤ `windows.rs` –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ—à–∏–±–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–ø–æ—Ä—Ç—è—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
- [ ] T023 [US2] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Ç–∫–µ—è Windows —Å –Ω–æ–≤—ã–º IPC/CLI `--toggle` –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∏ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–≤–∞–∂–¥—ã –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –º–µ–Ω—é).
- [ ] T024 [US2] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (README –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª), —É–∫–∞–∑–∞–≤, —á—Ç–æ Windows –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —à–æ—Ä—Ç–∫–∞—Ç—ã ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏—Ö —Å–∞–º–æ.

**Checkpoint**: US2 –∑–∞–≤–µ—Ä—à—ë–Ω, Windows –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –≤–∏–¥—è—Ç —Ä–µ–≥—Ä–µ—Å—Å–∞, –∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ.

---

## Phase 5: User Story 3 - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ö–æ—Ç–∫–µ—è –≤ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö DE (Priority: P3)

**Goal**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Hyprland/Niri/X11 –æ–∫—Ä—É–∂–µ–Ω–∏–π –º–æ–≥—É—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ö–æ—Ç–∫–µ–π –≤ —Å–≤–æ—ë–º DE/WM, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç `autohotpie-tauri --toggle`, –∏ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ pie-–º–µ–Ω—é.

**Independent Test**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ `quickstart.md` –æ–¥–∏–Ω–æ—á–Ω—ã–π –≤—ã–∑–æ–≤ `--toggle` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç overlay –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π ‚Äî —Å–∫—Ä—ã–≤–∞–µ—Ç, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ö–æ—Ç–∫–µ–µ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

### Implementation for User Story 3

- [ ] T025 [US3] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π Hyprland/Niri/X11 –≤ `quickstart.md`, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Ä–µ–∞–ª—å–Ω–æ–º—É –∏–º–µ–Ω–∏ –±–∏–Ω–∞—Ä—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º.
- [ ] T026 [US3] –û–±–Ω–æ–≤–∏—Ç—å CLI/IPC –ª–æ–≥–∏–∫—É –≤ `autohotpie-tauri/src-tauri/src/cli/toggle.rs` –∏ `main.rs`, —á—Ç–æ–±—ã —Å—Ü–µ–Ω–∞—Ä–∏–π —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±—ã—Å—Ç—Ä—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏ `--toggle` (–æ—Ç WM) –Ω–µ –ø—Ä–∏–≤–æ–¥–∏–ª –∫ –≥–æ–Ω–∫–∞–º —Å–æ—Å—Ç–æ—è–Ω–∏—è overlay.
- [ ] T027 [P] [US3] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ, backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –æ–∫–Ω–æ overlay –µ—â—ë –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ.
- [ ] T028 [US3] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—á–∏–π –ø–æ—Ç–æ–∫ –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π X11-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, i3 –∏–ª–∏ `sxhkd`), —É–±–µ–¥–∏–≤—à–∏—Å—å, —á—Ç–æ overlay –ø–æ—è–≤–ª—è–µ—Ç—Å—è/–∏—Å—á–µ–∑–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
- [ ] T029 [US3] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—á–∏–π –ø–æ—Ç–æ–∫ –Ω–∞ Hyprland –∏ Niri (–ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ/VM), —Å–≤–µ—Ä—è—è—Å—å —Å —à–∞–≥–∞–º–∏ –∏–∑ `quickstart.md`.

**Checkpoint**: US3 –∑–∞–≤–µ—Ä—à—ë–Ω, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö DE –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–∞—Å—Ç—Ä–æ–∏–≤ —à–æ—Ä—Ç–∫–∞—Ç—ã —Ç–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## Phase N: Polish & Cross-Cutting Concerns

**Purpose**: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ, —É–ª—É—á—à–µ–Ω–∏—è –∏ –∫—Ä–æ—Å—Å-—Å—Ä–µ–∑–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏.

- [ ] T030 [P] –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞ –º–æ–¥—É–ª–µ–π `backend` –∏ `pie_overlay`, —É—Å—Ç—Ä–∞–Ω–∏–≤ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ª—É—á—à–∏–≤ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.
- [ ] T031 [P] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Å–Ω–æ–≤–Ω–æ–π README –∏ —Ä–µ–ª–∏–∑–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏) —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π cross-platform –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ Wayland/X11 MVP.
- [ ] T032 –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç–ª–∞–¥–∫–∏ –≤ `quickstart.md` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è debug-–ª–æ–≥–æ–≤ –≤ backend).
- [ ] T033 –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä—É—á–Ω–æ–π –ø—Ä–æ—Ö–æ–¥ –ø–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º —Å—Ü–µ–Ω–∞—Ä–∏—è–º –∏–∑ `spec.md` (US1‚ÄìUS3), —Å–≤–µ—Ä—è—è—Å—å —Å Acceptance Scenarios –∏ Success Criteria, –∏ –æ—Ç–º–µ—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∑–∞–º–µ—Ç–∫–µ –∏–ª–∏ issue.

---

## Dependencies & Execution Order

### Phase Dependencies

- Setup (Phase 1) ‚Üí Must complete –ø–µ—Ä–µ–¥ Phase 2‚Äì5.
- Foundational (Phase 2) ‚Üí Blocker –¥–ª—è –≤—Å–µ—Ö user stories.
- User Story 1 (Phase 3) ‚Üí –ú–æ–∂–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ Phase 2, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–∞–∫ MVP.
- User Story 2 (Phase 4) ‚Üí –ó–∞–≤–∏—Å–∏—Ç –æ—Ç Phase 2; –ª–æ–≥–∏—á–µ—Å–∫–∏ –º–æ–∂–µ—Ç –∏–¥—Ç–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –æ—Ç–ª–∞–¥–∫–æ–π US1, –Ω–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å –ª—É—á—à–µ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è Wayland –ø–æ—Ç–æ–∫–∞.
- User Story 3 (Phase 5) ‚Üí –ó–∞–≤–∏—Å–∏—Ç –æ—Ç Phase 3 (CLI/IPC –≥–æ—Ç–æ–≤) –∏ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã overlay.
- Polish (Phase N) ‚Üí –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö user stories.

### User Story Dependencies

- US1 (P1): –ë–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ backend –∏ overlay (Phase 2), –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç US2/US3.
- US2 (P2): –ë–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ Phase 2, –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã US1 (–æ–±—â–∏–π `toggle_pie_menu`).
- US3 (P3): –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ CLI/IPC –∏ overlay (US1), –Ω–æ –Ω–µ –æ—Ç Windows-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π.

### Parallel Opportunities

- Tasks, –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ `[P]`, –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤.
- Setup –∑–∞–¥–∞—á–∏ T002‚ÄìT003 –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ (T001).
- –í Phase 3 —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (T014‚ÄìT015) –º–æ–∂–Ω–æ –≤–µ—Å—Ç–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –¥–æ—Ä–∞–±–æ—Ç–∫–æ–π CLI/IPC (T012‚ÄìT013).
- –í Phase 4 –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (T022) –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Ç–∫–µ—è (T020‚ÄìT021), –µ—Å–ª–∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è.
- –í Phase 5 —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (T028‚ÄìT029) –º–æ–∂–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —Å—Ä–µ–¥–∞–º–∏/–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏.

---

## Implementation Strategy

### MVP First (User Story 1 Only)

1. –ó–∞–≤–µ—Ä—à–∏—Ç—å Phase 1 –∏ Phase 2 (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ backend + –æ–∫–Ω–æ overlay).
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Phase 3 (US1) –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `--toggle` —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Wayland.
3. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å MVP: Wayland –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –º–µ–Ω—é.

### Incremental Delivery

1. Phase 1 + Phase 2 ‚Üí –≥–æ—Ç–æ–≤–∞ –±–∞–∑–∞.
2. Phase 3 (US1) ‚Üí MVP –¥–ª—è Wayland/X11.
3. Phase 4 (US2) ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–ø—ã—Ç–∞ Windows-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
4. Phase 5 (US3) ‚Üí –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö DE —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥–∏.
5. Phase N ‚Üí –ø–æ–ª–∏—Ä–æ–≤–∫–∞, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –æ—Ç–ª–∞–¥–∫–∞.

### Parallel Team Strategy

- –û–¥–∏–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ backend (–º–æ–¥—É–ª–∏ `backend`, `pie_overlay`, CLI/IPC).
- –î—Ä—É–≥–æ–π ‚Äî –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (React/IPC-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ UX overlay).
- –¢—Ä–µ—Ç–∏–π ‚Äî –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π (quickstart, Wayland/X11 –∫–æ–Ω—Ñ–∏–≥–∏).
