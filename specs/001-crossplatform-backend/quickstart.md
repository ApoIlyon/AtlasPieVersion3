# Quickstart: Wayland/X11 Toggle Setup

Этот гайд поможет настроить автозапуск Demona AutohotPie и системный хоткей для вызова pie-меню на Wayland/X11.

## Предварительные условия
- Установлено приложение AutohotPie Tauri (`autohotpie-tauri`).
- Приложение добавлено в автозапуск (через DE или systemd user service).
- CLI доступно из `$PATH` (`autohotpie-tauri --help`).

## Общий рабочий поток
1. Запустите приложение (демон) обычным способом.
2. Настройте в рабочем окружении хоткей, вызывающий `autohotpie-tauri --toggle`.
3. Убедитесь, что pie-меню появляется и скрывается при повторном нажатии хоткея.

## GNOME (Wayland)
1. Откройте «Параметры» → «Клавиатура» → «Сочетания клавиш».
2. Добавьте пользовательское сочетание:
   - Имя: `AutohotPie Toggle`
   - Команда: `/usr/bin/env autohotpie-tauri --toggle`
3. Назначьте удобную комбинацию (например, `Super+Space`).
4. Проверьте: нажмите хоткей → pie-меню появится; нажмите ещё раз → исчезнет.

## KDE Plasma (Wayland)
1. Откройте «Системные настройки» → «Ярлыки» → «Глобальные ярлыки» → «Пользовательские».
2. Создайте новый ярлык → «Запустить команду/скрипт».
3. В поле «Команда» укажите `autohotpie-tauri --toggle`.
4. Назначьте комбинацию и сохраните.
5. Убедитесь, что ярлык активен, перезапустив ярлыки (опционально `kglobalaccel5`).

## Hyprland
Добавьте в конфигурацию (`~/.config/hypr/hyprland.conf`):
```ini
bind = $mod, space, exec, autohotpie-tauri --toggle
```
Перезапустите Hyprland или примените конфиг (`hyprctl reload`).

## Niri
Добавьте в `~/.config/niri/config.kdl`:
```kdl
binding {
    modifiers=["Super"]
    key="Space"
    command="autohotpie-tauri --toggle"
}
```
Примените конфиг (`niri msg reload-config`).

## X11 (базовый пример)
Используйте `sxhkd` или i3 wm:
- `sxhkd` config: `super + space
    autohotpie-tauri --toggle`
- i3 config: `bindsym $mod+space exec --no-startup-id autohotpie-tauri --toggle`

## Проверка работоспособности
1. Запустите `autohotpie-tauri` (если не автозапущено).
2. В терминале выполните `autohotpie-tauri --toggle` — должно появиться pie-меню.
3. Повторите команду — меню исчезнет. Фронтенд должен получить событие `pie-menu:state-changed` (просмотр в DevTools → Console).
4. Если CLI сообщает, что приложение не запущено — проверьте автозапуск.

## Отладка
- Ошибка `BackendUnavailable`: платформа ещё не реализована; убедитесь, что документация обновлена или используйте альтернативный DE.
- Ничего не происходит: проверьте, что команду вызывает тот же пользователь, что запустил приложение.
- Хоткей не срабатывает: убедитесь, что DE не перехватывает комбинацию.

## Следующие шаги
- Настроить сервис (systemd user) для автозапуска CLI при старте сессии.
- Отслеживать обновления, добавляющие нативный Wayland backend.
